{% extends "base.html" %}

{% block content %}
    {% if msg %}
    <div class="alert alert-danger">
        <strong>{{msg}}</strong>
    </div>
    {% endif %}

     <form action="/add_user_db" method="post">
         <div class="row">
             <div class="form-group col-md-6">
                 <label class="form-label">Username:</label>
                 <input autocomplete="off" autofocus class="form-control" name="username" placeholder="Username" type="text" required/>
             </div>
             <div class="form-group col-md-6">
                 <label class="form-label">Password:</label>
                 <input autocomplete="off" class="form-control" name="password" placeholder="Password" type="text" required/>
             </div>
         </div>
         <div class="row">
             <div class="form-group col-md-6">
                 <div class="row">
                     <div class="form-group col-6">
                         <label class="form-label">First Name:</label>
                         <input autocomplete="off" autofocus class="form-control" name="fname" placeholder="firstname" type="text" required/>
                     </div>
                     <div class="form-group col-6">
                         <label class="form-label">Last Name:</label>
                         <input autocomplete="off" class="form-control" name="lname" placeholder="lastname" type="text" required/>
                     </div>
                 </div>
             </div>
             <div class="form-group col-md-6">
                 <label class="form-label">Confirm Password</label>
                 <input autocomplete="off" class="form-control" name="cpassword" placeholder="Password" type="text" required/>
             </div>
         </div>
         <div class="row">
             <div class="form-group col-md-6">
                 <label class="form-label">Email:</label>
                 <input autocomplete="off" autofocus class="form-control" name="email" placeholder="Email" type="text" required/>
             </div>
             <div class="form-group col-md-6">
                 <label class="form-label">Address:</label>
                 <input autocomplete="off" class="form-control" name="address" placeholder="address" type="text" required/>
             </div>
         </div>
         <div class="row">

             <div class="col-md-6">
                 <label class="form-label">Get your coordinates. [Latitude, Longitude]</label>
                 <div id="demo">
                     <button onclick="getLocation()" class="btn btn-secondary" type="button">Get It</button>
                 </div>
             </div>

             <div class="col-md-6">
                <div class="form-group col-md-12">
                    <label class="form-label">position:</label>
                    <select name="position" class="form-select" required>
                        <option value="null">--- please select ---</option>
                        <option value="patient">patient</option>
                        <option value="medical personnel">medical personnel</option>
                        <option value="admin">admin</option>
                    </select>
                </div>
             </div>
         </div>
             <button class="btn btn-primary btn-lg" type="submit" style="float:right;">Register +</button>
    </form>


    <script>
    var x = document.getElementById("demo");

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      x.innerHTML = "<div class='row'> <div class='form-group col-md-6'> <input class='form-control' name='latitude' value= " + position.coords.latitude +"> </div> <div class='form-group col-md-6'> <input class='form-control' name='longitude' value= "+ position.coords.longitude+"></div></div>";
    }

    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          x.innerHTML = "User denied the request for Geolocation."
          break;
        case error.POSITION_UNAVAILABLE:
          x.innerHTML = "Location information is unavailable."
          break;
        case error.TIMEOUT:
          x.innerHTML = "The request to get user location timed out."
          break;
        case error.UNKNOWN_ERROR:
          x.innerHTML = "An unknown error occurred."
          break;
      }
    }
</script>

{% endblock %}

{% block script %}

{% endblock %}